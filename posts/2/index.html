
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>The Place Where Wishes Come True</title>
  <meta name="author" content="Jellyflower">

  
  <meta name="description" content="The video stream in the multimedia file recorded by Fraps is encoded in Fraps’ own codec. The color space of the video stream can be either YV12 or &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://jellyflower.github.io/posts/2">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="http://feeds.feedburner.com/jellyflower" rel="alternate" title="The Place Where Wishes Come True" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href='//fonts.googleapis.com/css?family=Love+Ya+Like+A+Sister' rel='stylesheet' type='text/css'>
<link href='//fonts.googleapis.com/css?family=Dancing+Script' rel='stylesheet' type='text/css'>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-33630185-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">The Place Where Wishes Come True</a></h1>
  
    <h2>Keep Fighting</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/jellyflower" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:jellyflower.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/08/02/fraps-video-too-dark-how-to-decode-fraps-video-correctly/">Fraps Video Too Dark? How to: Decode Fraps Video Correctly</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2012-08-02T23:59:00-04:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>2</span><span class='date-suffix'>nd</span>, <span class='date-year'>2012</span></span> <span class='time'>11:59 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The video stream in the multimedia file recorded by Fraps is encoded in Fraps’ own codec. The color space of the video stream can be either YV12 or RGB24. There is an option in Fraps which lets you choose which color space to use.</p>

<p>Currently, many decoders fail to handle Fraps videos in the YV12 color space correctly, resulting in decoded pictures that appear very dark.</p>

<p>In either case, the video stream can be decoded correctly using AviSynth. For YV12, use:</p>

<pre><code>FFIndex(INPUT)
AudioDub(FFVideoSource(INPUT), FFAudioSource(INPUT))
ColorYUV(levels="PC-&gt;TV")
ColorMatrix(mode="rec.709-&gt;rec.601", clamp=0)
</code></pre>

<p>For RGB24, use:</p>

<pre><code>FFIndex(INPUT)
AudioDub(FFVideoSource(INPUT), FFAudioSource(INPUT))
</code></pre>

<p>Don’t use the following script:</p>

<pre><code>AviSource(INPUT)
</code></pre>

<p>That uses Fraps’ own decoder, which converts YV12 to RGB24. If you later encode the video to YV12, the whole process, YV12 → RGB24 → YV12, causes quality loss. In the above two scripts, there is no unnecessary color space conversion.</p>

<p>It is said that by using the right parameters, both FFmpeg and x264 can decode the video stream correctly. But I haven’t tried yet.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/07/22/versions-of-lullaby/">月海的子守歌的几个版本</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2012-07-22T22:56:00-04:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>22</span><span class='date-suffix'>nd</span>, <span class='date-year'>2012</span></span> <span class='time'>10:56 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>日语原版</h1>

<blockquote><p>长弓背负いし 月の精<br/>
梦の中より待ちをりぬ<br/>
今宵やなぐゐ、月夜见囃子<br/>
早く来んかと待ちをりぬ<br/>
眠りたまふ、ぬくと丸みて<br/>
眠りたまふ、母に抱かれて<br/>
真棹掲げし 水の精<br/>
梦の中より待ちをりぬ<br/>
今宵とりふね、うずまき鬼<br/>
早く来んかと待ちをりぬ<br/>
眠りたまふ、ゆるゆる揺られ<br/>
眠りたまふ、海に抱かれて</p></blockquote>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2012/07/22/versions-of-lullaby/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/04/14/moon-princess/">Moon Princess</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2012-04-14T17:22:00-04:00'><span class='date'><span class='date-month'>Apr</span> <span class='date-day'>14</span><span class='date-suffix'>th</span>, <span class='date-year'>2012</span></span> <span class='time'>5:22 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="/img/moon-princess.jpg" alt="Moon Princess" /></p>

<p>You shouldn&rsquo;t sell your soul to the devil even if you hated the world.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/04/04/official-direct-download-links-of-skype/">Official Direct Download Links of Skype</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2012-04-04T22:41:00-04:00'><span class='date'><span class='date-month'>Apr</span> <span class='date-day'>4</span><span class='date-suffix'>th</span>, <span class='date-year'>2012</span></span> <span class='time'>10:41 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>These are download links of Skype I discovered. They will always be the latest version and multilingual. These are especially useful for Chinese netizens, because the official site will always redirect them to the so-called Chinese official site, where a specially made &ldquo;Chinese Skype&rdquo; will be served, which has long been rumored to eavesdrop its users.</p>

<ul>
<li>Online Windows installer: <a href="http://www.skype.com/go/getskype">http://www.skype.com/go/getskype</a></li>
<li>Offline Windows installer: <a href="http://www.skype.com/go/getskype-full">http://www.skype.com/go/getskype-full</a></li>
<li>MSI: <a href="http://www.skype.com/go/getskype-msi">http://www.skype.com/go/getskype-msi</a></li>
<li>Mac OS X: <a href="http://www.skype.com/go/getskype-macosx.dmg">http://www.skype.com/go/getskype-macosx.dmg</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/03/31/use-mp4box-without-installing-gpac/">Use MP4Box Without Installing GPAC</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2012-03-31T19:42:00-04:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>31</span><span class='date-suffix'>st</span>, <span class='date-year'>2012</span></span> <span class='time'>7:42 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://gpac.wp.mines-telecom.fr/mp4box/">MP4Box</a> is an essential tool to manipulate ISO base media file formats, such as MP4, 3GP, etc. Currently it is better than FFmpeg. Later on it is packed in GPAC, a multimedia framework of which the other parts don&rsquo;t appear to be that useful.</p>

<p>To use MP4Box without installing the entire GPAC framework, you can extract relevant files from the installer using a extractor such as 7-Zip:</p>

<ul>
<li>js32.dll</li>
<li>libeay32.dll</li>
<li>libgpac.dll</li>
<li>MP4Box.exe</li>
<li>ssleay32.dll</li>
</ul>


<p>And add the directory to your path. Then you are good to go.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/03/17/almost-done/">Almost Done</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2012-03-17T21:37:00-04:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>17</span><span class='date-suffix'>th</span>, <span class='date-year'>2012</span></span> <span class='time'>9:37 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Recently I&rsquo;ve been working on my program which is capable of automatically preparing movies and anime for the new iPad. I tried feeding Madoka&rsquo;s opening to my program and got a somewhat nice result. You can see that my program is able to render subtitles in ASS format using custom fonts, thanks to libass.</p>

<p><img src="/img/madoka-render.png" alt="Mahou Shoujo Madoka Magica" /></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/03/15/serious-x264-bug-everything-becomes-purple-ish/">Serious X264 Bug: Everything Becomes Purple-ish!</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2012-03-15T22:21:00-04:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>15</span><span class='date-suffix'>th</span>, <span class='date-year'>2012</span></span> <span class='time'>10:21 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Recently a serious x264 bug has been discovered. It makes your video look purple-ish. A comparison <a href="http://tri4.net/subs/notes/44/why-do-you-have-so-many-version-ups">here</a> pretty much proves it.
This bug has been fixed in the latest version. Technically, all encodes encoded by x264 prior to the fix needs to be re-encoded. But I cannot find any information about the exact version number to which the fix has been applied.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/03/11/hardsubbing-ass-subtitles-in-avisynth/">Hardsubbing ASS Subtitles in AviSynth</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2012-03-11T00:27:00-05:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>11</span><span class='date-suffix'>th</span>, <span class='date-year'>2012</span></span> <span class='time'>12:27 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I find that this job can be nicely done by <a href="http://srsfckn.biz/assrender/">assrender</a>, which is based on libass. It even renders karaoke well. Its usage will be like:</p>

<pre><code>LoadCPlugin("assrender.dll")
assrender("subtitles.ass", hinting=3, fontdir="font")
</code></pre>

<p>The fontdir option is a directory holding fonts used to render the subtitles, which you don&rsquo;t want to install on your system.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/03/11/frame-accurate-decoding-and-frameserving-of-video-inside-avi/">Frame-accurate Decoding and Frameserving of Video Inside AVI</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2012-03-11T00:13:00-05:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>11</span><span class='date-suffix'>th</span>, <span class='date-year'>2012</span></span> <span class='time'>12:13 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Basically, AVI, MKV, MP4 and FLV are handled very well by <a href="http://code.google.com/p/ffmpegsource/">FFmpegSource2</a>. The script can be something like this:</p>

<pre><code>LoadCPlugin("ffms2.dll")
FFVideoSource("source.mkv")
</code></pre>

<p>Note that I&rsquo;m using the newer C plugin version.</p>

<p>For M2TS and TS, it seems that by far <a href="http://www.videohelp.com/tools/DGAVCDec">DGAVCDec</a> is the best choice. Use DGAVCIndex to index the source and you will get a DGA index file. Then write a script like this:</p>

<pre><code>LoadPlugin("DGAVCDecode.dll")
AVCSource("source.dga")
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/03/09/experiment-with-mp-4-dot-1-and-crf-25/">Experiment With MP 4.1 and CRF 25</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2012-03-09T00:46:00-05:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>9</span><span class='date-suffix'>th</span>, <span class='date-year'>2012</span></span> <span class='time'>12:46 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I accidentally encoded the fifth episode of Gekijouban Kara no Kyoukai using x264. I used the following command:</p>

<pre><code>x264 --profile main --level 4.1 --preset veryslow --tune animation --crf 25 --output output.264 source.avs
</code></pre>

<p>And this is the comparison of Frame 16416 of the video:</p>

<p><img src="/img/16416.png" alt="Comparison of Frame 16416" /></p>

<p>Of course the quality is very shitty. The image is fuzzy. The grain is gone. The details cannot be seen clearly. But the bit rate is only 303 kbps for a 720p 8-bit H.264 video stream! That may be useful in preparing video for portable devices. I&rsquo;ll experiment more to get the balance between quality and size.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/3">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/index.html">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/04/18/how-would-you-utilize-your-smartphone-if-you-were-sent-back-to-the-middle-ages/">How Would You Utilize Your Smartphone if You Were Sent Back to the Middle Ages?</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/18/qaac-the-new-preferred-way-to-encode-aac/">Qaac: The New Preferred Way to Encode AAC</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/03/09/how-to-use-64-bit-x264-with-32-bit-avisynth/">How to Use 64-bit X264 With 32-bit AviSynth</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/02/12/the-way-a-hacker-submits-video-to-bilibili/">黑客如何给 B 站投稿</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/01/10/twisty-destiny-walkthrough/">《雾之本境》完美精确攻略</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/01/09/snow-trap-endings/">《雪之本境EX》和《雪之本境～解境篇～》结局整理</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/01/08/snow-trap-walkthrough/">《雪之本境EX》和《雪之本境～解境篇～》完美精确攻略</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/11/10/how-to-turn-off-utorrent-ads-or-switch-to-a-better-bittorrent-client/">How to Turn Off μTorrent Ads (or Switch to a Better BitTorrent Client)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/09/01/build-boost-c-plus-plus-libraries-on-windows-using-mingw/">Build Boost C++ Libraries on Windows Using MinGW</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/09/01/newer-versions-of-gcc-for-windows-mingw-w64/">Newer Versions of GCC for Windows: MinGW-w64</a>
      </li>
    
  </ul>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Jellyflower -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'jellyflower';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
