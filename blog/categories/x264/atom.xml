<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: X264 | The Place Where Wishes Come True]]></title>
  <link href="http://jellyflower.github.io/blog/categories/x264/atom.xml" rel="self"/>
  <link href="http://jellyflower.github.io/"/>
  <updated>2014-08-14T00:12:03-04:00</updated>
  <id>http://jellyflower.github.io/</id>
  <author>
    <name><![CDATA[Jellyflower]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[How to Use 64-bit X264 With 32-bit AviSynth]]></title>
    <link href="http://jellyflower.github.io/blog/2013/03/09/how-to-use-64-bit-x264-with-32-bit-avisynth/"/>
    <updated>2013-03-09T18:40:00-05:00</updated>
    <id>http://jellyflower.github.io/blog/2013/03/09/how-to-use-64-bit-x264-with-32-bit-avisynth</id>
    <content type="html"><![CDATA[<p>For some reason I had to use AviSynth 2.6, of which I could’t seem to find a 64-bit build. But I did’t want to use 32-bit x264, because the 64-bit version had much better performance on 64-bit machines.</p>

<p>After some research, I found avs2pipemod. avs2pipemod is a program that pipes the output of AviSynth to other programs, with which we are able to connect 64-bit x264 and 32-bit AviSynth.</p>

<p>Because we will be piping raw video, we have to specify the parameters of the video manually. Fortunately avs2pipemod is able to generate those arguments for us. First we execute the following command:</p>

<pre><code>avs2pipemod -x264raw SCRIPT.avs
</code></pre>

<p>And we will get something like this:</p>

<pre><code>- --demuxer raw --input-csp bgr --input-depth 8 --input-res 1920x1080 --output-csp rgb --frames 24429 --fps 30030/1001
</code></pre>

<p>Of course the values will change depending on your source. So now we can call x264 with those arguments</p>

<pre><code>avs2pipemod -rawvideo SCRIPT.avs | x264 - --demuxer raw --input-csp bgr --input-depth 8 --input-res 1920x1080 --frames 24429 --fps 30030/1001 --preset veryslow --crf 23 -o OUTPUT.mkv
</code></pre>

<p>It’s just copying the arguments generated by the first command, plus the arguments you would like to use for encoding.</p>

<p>For some reason when I tried this, I got my encoded video upside down. I am not quite clear what caused that. However the problem can be easily solved by changing the previous command a little bit:</p>

<pre><code>avs2pipemod -rawvideo=vflip SCRIPT.avs | ...
</code></pre>

<p>The x264 part remains the same. I only tried once, so I don’t know if this happens to just some or all videos. You definitely want to check your result to know if it is necessary for you to use vflip.</p>

<p>So far we’ve done the video part. For audio, use the following command:</p>

<pre><code>avs2pipemod -wav SCRIPT.avs | flac -8V -o OUTPUT.flac -
</code></pre>

<p>Here we are piping the audio in WAV format, therefore we don’t need to specify the parameters of the audio. Of course you can use whatever encoder you want.</p>

<p>Now just mux the two streams and you are good to go.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Serious X264 Bug: Everything Becomes Purple-ish!]]></title>
    <link href="http://jellyflower.github.io/blog/2012/03/15/serious-x264-bug-everything-becomes-purple-ish/"/>
    <updated>2012-03-15T22:21:00-04:00</updated>
    <id>http://jellyflower.github.io/blog/2012/03/15/serious-x264-bug-everything-becomes-purple-ish</id>
    <content type="html"><![CDATA[<p>Recently a serious x264 bug has been discovered. It makes your video look purple-ish. A comparison <a href="http://tri4.net/subs/notes/44/why-do-you-have-so-many-version-ups">here</a> pretty much proves it.
This bug has been fixed in the latest version. Technically, all encodes encoded by x264 prior to the fix needs to be re-encoded. But I cannot find any information about the exact version number to which the fix has been applied.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Experiment With MP 4.1 and CRF 25]]></title>
    <link href="http://jellyflower.github.io/blog/2012/03/09/experiment-with-mp-4-dot-1-and-crf-25/"/>
    <updated>2012-03-09T00:46:00-05:00</updated>
    <id>http://jellyflower.github.io/blog/2012/03/09/experiment-with-mp-4-dot-1-and-crf-25</id>
    <content type="html"><![CDATA[<p>I accidentally encoded the fifth episode of Gekijouban Kara no Kyoukai using x264. I used the following command:</p>

<pre><code>x264 --profile main --level 4.1 --preset veryslow --tune animation --crf 25 --output output.264 source.avs
</code></pre>

<p>And this is the comparison of Frame 16416 of the video:</p>

<p><img src="/img/16416.png" alt="Comparison of Frame 16416" /></p>

<p>Of course the quality is very shitty. The image is fuzzy. The grain is gone. The details cannot be seen clearly. But the bit rate is only 303 kbps for a 720p 8-bit H.264 video stream! That may be useful in preparing video for portable devices. I&rsquo;ll experiment more to get the balance between quality and size.</p>
]]></content>
  </entry>
  
</feed>
